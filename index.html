<!doctype html>

<html lang="en">
<head>
<title>Local Weather</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<link rel="stylesheet" href="style.css">
  <meta charset="utf-8">
</head>

<body>
    <div class="title">Your Local Weather in - </div>
    
    <div id="weather"></div>
    
    <div id="icon"></div>
    
    
    
    <script>
    $(document).ready(function()
                      {
        
        console.log("document loaded successfully");
        var zipcode;
        var country;
        var city;
        var kelvin;
        var fahrenheit;
        var weather;
        var iconUrl = "http://openweathermap.org/img/w/" + weather + ".png";

        $.ajax(
            {
                type:"GET",
                dataType:"json",
                url:"http://ip-api.com/json",
                cache:false,
                async:true,
                success:function(response)
                {
                    zipcode = response.zip;
                    country = response.country;
                    city = response.city;
                    console.log(zipcode);
                    console.log(country);
                    console.log(response.city);
  
                }
            });
        
        $.ajax(
            {
                type:"GET",
                dataType:"json",
                url:"http://api.openweathermap.org/data/2.5/weather?zip=" + zipcode + country + "&APPID=f19cee9398f6d150ea4f069baa624eb8",
                cache:false,
                async:true,
                success:function(response)
                {
                    console.log(response);
                    kelvin = response.main.temp;
                    fahrenheit = Math.round((1.8*(kelvin - 273) + 32));
                    console.log(fahrenheit);
                    console.log(kelvin);
                    weather = response.weather[0].icon;
                    console.log(weather);
                    $(".title").append(city);
                    $("#weather").text(fahrenheit);
                    $("#icon").html("<img src='http://openweathermap.org/img/w/" + response.weather[0].icon + ".png' alt='Icon depicting current weather.'>");
                }
            });
    });
    </script>
    
</body>
</html>